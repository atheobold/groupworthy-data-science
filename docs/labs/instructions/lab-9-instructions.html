<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Instructions">

<title>Lab 9: Searching for Efficiency &amp; Making Great Tables – Introduction to Statistical Computing in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/stat-331-hex.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-9d3871c3a33628a85db1522934fdc5ee.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Introduction to Statistical Computing in R</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../course-materials/calendar.html"> 
<span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../course-materials/syllabus.html"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-portfolio" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Portfolio</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-portfolio">    
        <li>
    <a class="dropdown-item" href="../../portfolio/portfolio-instructions.html">
 <span class="dropdown-text">Portfolio Instructions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../portfolio/midterm-portfolio-targets.html">
 <span class="dropdown-text">Midterm Portfolio Learning Targets</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../portfolio/examples/midterm-A.html">
 <span class="dropdown-text">Example A-level Portfolio (Midterm)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../portfolio/examples/midterm-B.html">
 <span class="dropdown-text">Example B-level Portfolio (Midterm)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../portfolio/examples/midterm-C.html">
 <span class="dropdown-text">Example C-level Portfolio (Midterm)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../course-materials/course-resources.html"> 
<span class="menu-text">Resources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../labs/exemplars/student-work.html"> 
<span class="menu-text">Exemplary Student Work</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#accessing-the-lab" id="toc-accessing-the-lab" class="nav-link active" data-scroll-target="#accessing-the-lab">Accessing the Lab</a></li>
  <li><a href="#formatting-tables" id="toc-formatting-tables" class="nav-link" data-scroll-target="#formatting-tables">Formatting Tables</a></li>
  <li><a href="#the-data" id="toc-the-data" class="nav-link" data-scroll-target="#the-data">The Data</a></li>
  <li><a href="#lab-2" id="toc-lab-2" class="nav-link" data-scroll-target="#lab-2">Lab 2</a></li>
  <li><a href="#lab-3" id="toc-lab-3" class="nav-link" data-scroll-target="#lab-3">Lab 3</a></li>
  <li><a href="#lab-7" id="toc-lab-7" class="nav-link" data-scroll-target="#lab-7">Lab 7</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/atheobold/groupworthy-data-science/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lab 9: Searching for Efficiency &amp; Making Great Tables</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Instructions </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="accessing-the-lab" class="level2">
<h2 class="anchored" data-anchor-id="accessing-the-lab">Accessing the Lab</h2>
<p>Download the template Lab 8 Quarto file here: <a href="../student/lab-9-student.qmd" download=""><code>lab-9-student.qmd</code></a></p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Be sure to save this in the Lab 9 folder, inside your Week 9 folder, inside your STAT 331 folder!</p>
</div>
</div>
</section>
<section id="formatting-tables" class="level2">
<h2 class="anchored" data-anchor-id="formatting-tables">Formatting Tables</h2>
<p>In this lab, we will also practice making nice, report worthy, tables!</p>
<p>I would recommend you think of tables no different from the visualizations you’ve been making. We want <strong>all</strong> aspects of our tables to be clear to the reader, so the comparisons we want them to make are straightforward. You should be thinking about:</p>
<ul>
<li>Column headers</li>
<li>Grouping headers</li>
<li>Order of columns</li>
<li>Order of rows</li>
<li>Number of decimals included for numeric entries</li>
<li>etc.</li>
</ul>
<p>Tables are also a great avenue to display creativity! In fact, there is a yearly <a href="https://www.rstudio.com/blog/rstudio-table-contest-2022/">RStudio table contest</a>, and <a href="https://community.rstudio.com/c/table-gallery/64">here</a> is a gallery of the award winning tables!</p>
<p>There are many packages for generating tables but I recommend either <code>kable()</code> function from the <strong>knitr</strong> package or <code>gt()</code> function from the <strong>gt</strong> package and their add-ons.</p>
<p><strong>For simple tables</strong></p>
<ul>
<li>the <code>kable()</code> function from the <strong>knitr</strong> package for <em>simple</em> tables</li>
<li>the <code>gt()</code> function from the <strong>gt</strong> package</li>
</ul>
<p><strong>For more sophisticated tables</strong></p>
<ul>
<li>styling functions from the <strong>kableExtra</strong> package (e.g., <code>kable_styling()</code>, <code>kable_classic()</code>)</li>
<li>add-on functions from the <strong>gt</strong> package (e.g., <code>cols_label()</code>, <code>tab_header()</code>, <code>fmt_percent()</code>)</li>
</ul>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Quarto doesn’t play nice with some options for formatting HTML tables in other packages.</p>
<p>To make sure that your tables render as expected, we need to specify <code>html-table-processing: none</code> in the YAML header. You will notice that I already included that in this lab.</p>
<p>I also recommend using the <strong>Source Editor</strong> for this lab.</p>
</div>
</div>
</section>
<section id="the-data" class="level2">
<h2 class="anchored" data-anchor-id="the-data">The Data</h2>
<p>For this week’s lab, we will be <strong>revisiting questions from previous lab assignments</strong>, with the purpose of using functions from the <code>map()</code> family to iterate over certain tasks. To do this, we will need to load in the data from Lab 2, Lab 3, and Lab 7.</p>
<p><strong>Question 1: Edit the code below to read in the appropriate datsets that you should have saved from the previous labs!</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Data from Lab 2</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>surveys <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"Week 2"</span>, <span class="st">"Lab 2"</span>, <span class="st">"surveys.csv"</span>))</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Data from Lab 3</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>evals <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"Week 3"</span>, <span class="st">"Lab3"</span>, <span class="st">"teacher_evals.csv"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">sex =</span> gender)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Data from Lab 7</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>fish <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"Week 7"</span>, <span class="st">"Lab 7"</span>, <span class="st">"BlackfootFish.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="lab-2" class="level2">
<h2 class="anchored" data-anchor-id="lab-2">Lab 2</h2>
<p>First up, we’re going to revisit Question 2 from Lab 2. This question asked:</p>
<blockquote class="blockquote">
<p>What are the data types of the variables in this dataset?</p>
</blockquote>
<p><strong>Question 2: Using <code>map_chr()</code>, produce a table of the data type of each variable in the <code>surveys</code> dataset. Specifically, the table should have two columns <code>Variable</code> and <code>Data Type</code> with a row for each variable and be displayed using <code>kable()</code>.</strong></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>You will want to check out the <code>enframe()</code> function to help with this task.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Q1 code</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Question 3: Format the table nicely! Your table must use either <code>kable()</code> and functions in the kableExtra package or <code>gt()</code> and functions from the gt package to produce a table with the following qualities:</strong></p>
<ul>
<li>rows are ordered to make the information easy to understand</li>
<li>include a caption or header</li>
<li>use bolded column names</li>
</ul>
<p><em>Note that you should assign the column names when creating the table, not by renaming columns in the dataset itself because we hate variable names with spaces in them!</em></p>
</section>
<section id="lab-3" class="level2">
<h2 class="anchored" data-anchor-id="lab-3">Lab 3</h2>
<p>Now, were on to Lab 3 where we will revisit two questions.</p>
<p>In the original version of Lab 3, Question 4 asked you to:</p>
<blockquote class="blockquote">
<p>Change data types in whichever way you see fit (e.g., is the instructor ID really a numeric data type?)</p>
</blockquote>
<!-- This should get changed to `modify_if()` (not `map_if()`) -->
<!-- `modify()`: the modify() family always returns the same type as the input object. -->
<!-- modify_if() only modifies the elements of .x that satisfy a predicate and leaves the others unchanged. 
modify_at() only modifies elements given by names or positions. -->
<p><strong>Question 4: Using <code>map_at()</code> or <code>map_if()</code>, convert the <code>course_id</code>, <code>weekday</code>, <code>academic_degree</code>, <code>time_of_day</code>, and <code>sex</code> columns to factors. In other words, convert all character variables into factors. DO NOT PRINT OUT YOUR NEW DATA FRAME, just show the code.</strong> <em>Hint: You will need to use <code>bind_cols()</code> to transform the list output back into a data frame.</em></p>
<p>Next up, we’re going revisit Question 7 which asked:</p>
<blockquote class="blockquote">
<p>What are the demographics of the instructors in this study? Investigate the variables <code>academic_degree</code>, <code>seniority</code>, and <code>sex</code> and summarize your findings in ~3 complete sentences.</p>
</blockquote>
<p>Many people created <strong>multiple</strong> tables of counts for each of these demographics, but in this exercise we are going to create <strong>one</strong> table with every demographic.</p>
<p><strong>Question 5: Recreate the (mainly unformatted) table below using <u>one</u> pipeline. It is okay if the rows are not in the same order in your table, but the rest of the table should match mine. Meaning, you will need to do some renaming of the names of the variables and their levels.</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/lab-9-unformatted.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%" alt="A table with four columns labeled variable, level, n, and prop. Under the variable column there are four rows labeled Academic Degree, the levels of this variable (displayed in the level column) are Doctorate (n = 177, prop = 0.5747), Masters (78, 0.2532), No Degree (44, 0.1429), and Tenured Professor (9, 0.0292). Under the variable column there are two rows labeled Seniority, the levels (displayed in the levels column) are Junior (159, 0.5162) and Senior (149, 0.4838). Under the variable column there are two rows labeled Sex, the levels (displayed in the levels column) are Female (141, 0.4578) and Male (167, 0.5422)."></p>
</figure>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Same Data Cleaning as Lab 3
</div>
</div>
<div class="callout-body-container callout-body">
<p>Repeat the data cleaning steps that we did before question 7 to recreate this exact table. Remember that we needed to first only keep one row per instructor!</p>
<p>I’m using the <code>sen_level</code> classification from Challenge 3:</p>
<ul>
<li><code>"junior"</code> = <code>seniority</code> is 4 or less (inclusive)</li>
<li><code>"senior"</code> = <code>seniority</code> is between 4 and 8 (inclusive)</li>
<li><code>"very senior"</code> = <code>seniority</code> is greater than 8.</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<!-- There are two main ways (that I have thought of) to approach this efficiently: -->
<!-- 1. Using `map_at()` and `list_rbind()`. The `names_to` argument in  -->
<!-- `list_rbind()` will be key! -->
<!-- 2. Using `pivot_wider()`. -->
<!-- For both options, you should start by creating a dataframe that has the -->
<!-- `variable`, `level`, and `count` columns and then calculate `prop`, the -->
<!-- proportion of professors that are in each group. Once you have these values -->
<!-- calculated, then you can start styling the appearance of the labels! -->
<p>I used the following options in <code>kable_styling()</code> (from the <strong>kableExtra</strong> package) to output this table:</p>
<pre><code>  kable_styling(full_width = FALSE,
                bootstrap_options = "striped")</code></pre>
</div>
</div>
<p><strong>Question 6: Now turn your output into a very nice table, like one of the examples below using <code>kable()</code> and <code>kableExtra</code> or <code>gt()</code>.</strong></p>
<div class="columns">
<div class="column" style="width:48%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/lab-9-format-kable.png" class="img-fluid figure-img" alt="This table takes the previous table and formats it so there are obvious groups for Academic Degree, Seniority, and Sex. The table has a title: Demographics of Professors at the University of Poland, Warsaw in 2020. The title is in light gray text above the table. The table has four columns: Demographic, Group, Count, and %. Column headers are bold, and the Professor label spans across the Count and % columns. Horizontal dividing lines separate the major demographic categories: Academic Degree, Seniority, and Sex. Each demographic name appears in the first column, vertically grouped with its subcategories listed beneath it. For example, under Academic Degree, the groups listed are No Degree, Masters, Doctorate, and Tenured Professor with counts and percentages to the right (44 – 14.29%, 78 – 25.32%, 177 – 57.47%, 9 – 2.92%). Similar formatting follows for Seniority (Junior, Senior) and Sex (Female, Male). The layout uses consistent alignment, with text left-aligned and numbers right-aligned for clarity."></p>
<figcaption>Example 1, produced with the <code>kable()</code> function and functions from the <strong>kableExtra</strong> package</figcaption>
</figure>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/lab-9-format-gt.png" class="img-fluid figure-img" alt="A professionally formatted table titled: Demographics of Professors. A subtitle below reads: Student Evaluations at the University of Poland, Warsaw in 2020. The table is divided into three main sections: Seniority, Sex, and Academic Degree, each displayed as a bold header row with a light gray background spanning the width of the table. Column headers are Demographic, Count, and %, under a merged heading labeled Professors. Data rows under each section are separated by thin horizontal lines, with category names left-aligned and numeric values right-aligned for readability. Under Seniority: Junior (159, 51.62%) and Senior (149, 48.38%). Under Sex: Female (141, 45.78%) and Male (167, 54.22%). Under Academic Degree: No Degree (44, 14.29%), Masters (78, 25.32%), Doctorate (177, 57.47%), and Tenured Professor (9, 2.92%). The overall layout is clean and minimalist, using alternating gray headers and white data rows for clear grouping and contrast."></p>
<figcaption>Example 2, produced with the <strong>gt</strong> package</figcaption>
</figure>
</div>
</div>
</div>
<p><strong>Your table does not need to copy one of these exactly but it should include <u>all</u> of the following:</strong></p>
<ul>
<li>Some way of clearly indicating the three variable types as row groups</li>
<li>Giving nice column names</li>
<li>Using a column header that spans the <code>Count</code> and <code>%</code> columns</li>
<li>Nicely formatting the % column to include % signs and only 1-2 digits</li>
<li>Giving the table a title or a caption</li>
</ul>
<!-- ## Lab 5 -->
<!-- In lab 5 we got to solve a mystery using a bunch of different related data sets. -->
<!-- Remember how we got the data? -->
<!-- > This code chunk will read in all of the tables of data for you. Don't modify or remove this! -->
<!-- This was also a mystery at the time! The code chunk given loaded an `.Rdata` file -->
<!-- that included all of the data frames you needed for your analysis. However, your -->
<!-- data may not always be saved in a nice `.Rdata` file. Let's write a more general -->
<!-- function to read in lots of datasets ourselves! -->
<!-- **Question 6: Write a function whose only argument is a directory that will read in all .csv files in that directory and return a *list* of the data frames.** -->
<!-- Specifically your function should: -->
<!--   1. Find the names of all .csv files in that directory (the `list.files()` -->
<!--   function will be helpful). -->
<!--   2. Use `map()` to efficiently read all of the files into R and save them in a -->
<!--   **list** -->
<!--   3. Rename the elements of the list with the names of each file  -->
<!--   4. Return the list -->
<!-- **Test your function on a directory that has at least two .csv files in it and show us that it works! DO NOT print full datasets. Show us that the output is a list and that the names of the list are file names. Your function should be able to handle if a directory includes files that aren't only csv's** -->
<!-- ```{r} -->
<!-- #| label: data-read-function -->
<!-- ``` -->
<!-- ::: {.callout-note} -->
<!-- For example, if I have a directory `data/` that has `surveys.csv`,  -->
<!-- `teacher_evals.csv`, and `bCH_murder_data.Rdata` in it, the function should -->
<!-- return a list with two elements - the surveys and teacher_evals data frames. The -->
<!-- names of the list elements should be `"surveys.csv"` and `"teacher_evals.csv"`. -->
<!-- ::: -->
</section>
<section id="lab-7" class="level2">
<h2 class="anchored" data-anchor-id="lab-7">Lab 7</h2>
<p>For our last problem, we will revisit a question from the most recent lab. Question 1 asked you to use <code>across()</code> to make a table which summarized:</p>
<blockquote class="blockquote">
<p>What variable(s) have missing values present?<br>
How many observations have missing values?</p>
</blockquote>
<p><strong>Question 7: Using <code>map_int()</code>, produce a nicely formatted table of the number of missing values for each variable in the <code>fish</code> data.</strong></p>
<p><strong>Question 8: Now turn your output into a very nice table, like the example below using the gt package. Specifically, your table should color the cells with 0 missing values green and cells with &gt; 0 missing values red.</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/lab-9-format-color.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%" alt="A table titled: Number of Missing Values for Fish Measurements. A subtitle below reads: Data collected from 1989 to 2006 on the Blackfoot Fish River in Montana. The table has two columns: Measurement Variable and Missing Values. Each row lists a variable from the fish dataset—trip, mark, length, year, section, species, and weight—with its corresponding count of missing values. Cells in the Missing Values column are color-coded to indicate data completeness: Green cells represent zero missing values for all variables except one. The last row, for weight, is filled with a contrasting orange color to highlight a higher count of missing data (1,796 missing values). Text is centered within cells, headers are bolded with a light gray horizontal divider, and the overall design uses a clean, minimalistic layout."></p>
</figure>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>data_color()</code>
</div>
</div>
<div class="callout-body-container callout-body">
<p>You will find this documentation page helpful! https://gt.rstudio.com/reference/data_color.html</p>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/github\.com\/atheobold\/groupworthy-data-science");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© Copyright 2024, Allison Theobold &amp; Judith Canner</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/atheobold/groupworthy-data-science/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>This page is built with ❤️ and <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>




</body></html>